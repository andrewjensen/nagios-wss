<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>nagios-wss by camronlevanger</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>nagios-wss</h1>
        <h2>A Nagios WAMP Router/Web Socket Monitoring Plugin</h2>
        <a href="https://github.com/camronlevanger/nagios-wss" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="nagios_wss" class="anchor" href="#nagios_wss" aria-hidden="true"><span class="octicon octicon-link"></span></a>nagios_wss</h1>

<h2>
<a id="a-nagios-wamp-v1-and-v2-web-socket-monitoring-plugin" class="anchor" href="#a-nagios-wamp-v1-and-v2-web-socket-monitoring-plugin" aria-hidden="true"><span class="octicon octicon-link"></span></a>A Nagios WAMP V1 and V2 Web Socket Monitoring Plugin</h2>

<h3>
<a id="now-supports-wamp-protocol-versions-1-and-2-check-out-the-releases-for-more-details" class="anchor" href="#now-supports-wamp-protocol-versions-1-and-2-check-out-the-releases-for-more-details" aria-hidden="true"><span class="octicon octicon-link"></span></a>Now supports WAMP protocol versions 1 and 2. Check out the <a href="https://github.com/camronlevanger/nagios-wss/releases">releases</a> for more details.</h3>

<p>A Nagios NRPE script that allows you to monitor a web socket server using
the <em>WAMP V2</em> protocol. While it is fairly easy with Nagios to monitor whether
or not your server proccess is running, unfortunately that can't tell us
if that server is available and accepting connections.</p>

<p>With nagios-wss you can actually open a connection to your websocket servers and
have the confidence of knowing that they are responding correctly to your users.</p>

<p>This script is designed to be run on Nagios client servers using the NRPE daemon.</p>

<p>For more information on using Nagios and NRPE visit the following link:</p>

<p><a href="http://nagios.sourceforge.net/docs/nrpe/">http://nagios.sourceforge.net/docs/nrpe/</a></p>

<h2>
<a id="installation-and-usage-wamp-v2-specific-for-v1-see-readmemd-in-the-v100-release" class="anchor" href="#installation-and-usage-wamp-v2-specific-for-v1-see-readmemd-in-the-v100-release" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation and Usage (WAMP V2 specific, for V1 see <a href="https://github.com/camronlevanger/nagios-wss/blob/v1.0.0/README.md">README.md in the v1.0.0 release</a>)</h2>

<h3>
<a id="download-and-install-nagios-wss" class="anchor" href="#download-and-install-nagios-wss" aria-hidden="true"><span class="octicon octicon-link"></span></a>Download and Install nagios-wss</h3>

<h4>
<a id="clone-source-and-install-manually" class="anchor" href="#clone-source-and-install-manually" aria-hidden="true"><span class="octicon octicon-link"></span></a>Clone Source and Install Manually</h4>

<p>This is a pretty simple option for this small codebase. We will clone the  source into
the directory where we want to keep our Nagios plugins, install the required libraries,
and finally set proper permissions.</p>

<pre><code>cd /path/to/where/you/want/it
git clone git@github.com:camronlevanger/nagios-wss.git
cd nagios-wss
pip install -r requirements.txt
</code></pre>

<p>Then restart the NRPE service, on Ubuntu that looks like:</p>

<pre><code>service nagios-nrpe-server restart
</code></pre>

<h4>
<a id="install-using-pip" class="anchor" href="#install-using-pip" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install Using Pip</h4>

<p>Coming Soon(er or later)</p>

<h3>
<a id="add-nagios-wss-command-to-nrpe-client" class="anchor" href="#add-nagios-wss-command-to-nrpe-client" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add nagios-wss Command to NRPE Client</h3>

<p>Now we need to edit our nrpe.cfg file and add our new plugin command.</p>

<pre><code>vim /etc/nagios/nrpe.cfg
</code></pre>

<p>Now add the check_wss_conn command to the list.</p>

<pre><code> command[check_wss_conn]=/path/to/where/you/put/it/check_wss_conn.py
</code></pre>

<p>By default nagios-wss connects to wss://localhost:8080, if this works for your
setup then the above command config is all that is needed. If that does not reflect
the location of the socket server you need to monitor, you can also pass in the
host as an arg to the command.</p>

<p>To pass args to the command make sure you set in nrpe.cfg</p>

<pre><code>dont_blame_nrpe=1
</code></pre>

<h3>
<a id="important-arguments" class="anchor" href="#important-arguments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Important arguments:</h3>

<ul>
<li>-H host_uri | The url you use to connect to the socket server - This defaults to wss://localhost:8080/ws</li>
<li>-R realm | The WAMP realm your server is listening on - defaults to realm1</li>
<li>-T topic | The name of the topic you want the monitor to attempt subscribing to - defaults to notifications.1</li>
</ul>

<h3>
<a id="add-nagios-wss-to-nagios-checks-on-your-nagios-monitoring-server" class="anchor" href="#add-nagios-wss-to-nagios-checks-on-your-nagios-monitoring-server" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add nagios-wss to Nagios Checks on Your Nagios Monitoring Server</h3>

<p>Define a new service for nagios-wss</p>

<pre><code>define service {
    use generic-service (or your appropriate defined service)
    host_name   name_of_your_client_host
    service_description Web Socket Server Monitor
    check_command   check_wss_conn
}
</code></pre>

<p>Resart the Nagios host.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/camronlevanger/nagios-wss/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/camronlevanger/nagios-wss/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/camronlevanger/nagios-wss"></a> is maintained by <a href="https://github.com/camronlevanger">camronlevanger</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
